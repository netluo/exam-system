多选题：以下哪两个正确
A、一个分区可以跨多个 unit
B、一个分区不可以跨 unit
C、多个分区可以跨 unit
D、多个分区不可以跨 unit
答案： BC

多选题（选 2 个）：客户的 OB 集群是 1-1-1 模式（ 3 个 zone,每个 zone 有 1 台 observer），租户 A 在每个 zone 上都有一个 unit,现在需要只把第一个 zone1（ z1）的资源扩大，以下哪几个正确？
A、 拆分 resource pool，然后单独给 z1 给设置一个更大的 unit 规格
B、 给 Z1 新增加一台机器，然后设置租户在 Z1 上有 2 个 unit
C、 租户在不同 zone 上必须是同构的，不能单独设置某个 zone 的资源
D、 给 Z1 新增加一台机器， 然后把租户 A 的 unit 单独迁移过去
答案： AB

下列哪些情况必须打开负载均衡？（多选 2 个）
A、创建分区表（一个表多个分区），让分区副本均匀分布到所有 unit 上
B、 Primary zone 设置成 RANDOM 情况下，让 Leader 分布到各个 zone 上
C、租户每个 zone 扩容一台机器后，让所有分区副本均匀分布到所有机器上
D、多副本部署情况下， leader 副本所在的机器宕机，自动选举新的 leader 副本
答案： BC

多选题： DBA 准备减小目标业务租户的 unit_num，来进行业务租户的缩容，这个时候需要提前把哪些系统参数设为 True？（正确个数： 2 个）
A、 enable_sql_audit
B、 enable_auto_leader_switch
C、 enable_syslog_recycle
D、 enable_rebalance
E、 enable_rereplication
答案： BD

多选题：关于 OB 资源池和租户的内部视图说法正确的是？
A、 __all_unit 记录了 resource pool 中的 resouce unit 在集群中的分布
B、 __all_tenant_resource_statics 记录了 zone 资源的使用状态
C、 __all_unit_config 记录了集群资源规格的定义
D、 __all_tenant 记录了各集群所有租户的资源的使用情况
E、 __all_resource_pool 记录了集群的所有 resouce pool 配置信息
答案： ACE

多选题： __all_rootservice_event_history，以下哪些操作会记录在这里面？选三个
A、记录集群级事件，如 major freeze, 合并，server 上下线，负载均衡任务执行切主等，保留最近 7 天历史
B、转储这个动作，会同时记录到 2 个表中
C、set global variables 是被看做 DDL，因为它需要走 RS 调用的路径。
D、系统命令：如 alter system set primary_zone 是记录在在__all_server 表里的。
E、转储开始和结束时间，是放在 server_log 里的。
答案： ABC

多选题：如果遇到 Over tenant memory limits 报错，我们应该执行哪些操作？（正确个数 ：3 个）
A、如资源足够，迅速扩大租户内存
B、排查是 memstore 还是内存模块超限，如找到引起问题的 sql，考虑优化可能
C、观察租户 tps，同往常相比是否异常突增，有异常的话建议应用增加有限流措施
D、立刻触发合并，将内存释放，集群恢复正常
答案： ABC

多选题：配置了定时合并，但是发现合并没有触发，那么有可能是哪些原因导致的？（正确个数： 2 个）
A、 merge_thread_count 被设置为 0
B、关闭了轮转合并
C、 enable_manual_merge=ON
D、 suspend_merge=true
答案： CD

多选题：关于 OceanBase 的转储适用场景，以下说法正确的是________？（正确个数：3 个）
A、提升集群性能
B、扩大存储空间
C、大促/跑批
D、不希望轮转合并（切主杀大事务）或者合并过程中影响性能
E、导数据
答案： CDE

多选题（选 2 个）：双 11 大促，凌晨 0 点开始业务量上升，合并需要两个小时才能完成，问如下哪些操作可以使大促期间系统运行更稳定？
A 在晚上 9 点先手工合并
B 将定时合并临时调整为 21:00
C 增大 minor_freeze_times 值
D 减小 freeze_trigger_percentage 值
答案： AB

多选题（选 3 个）：合并触发方式
A、定时合并
B、 MemStore 使用率达到阈值自动合并
C、手动合并
D、都不对
答案： ABC

多选题：如下哪些是可变长的数据结构？ 3 个
A、 Micro Block
B、 Macro Block
C、 indexBlock
D、 ROWKEY
答案： ACD

多选题 3 个：关于 OB 的合并和冻结，以下说法正确的是？
A、增量数据存的是更新数据，放在内存中，由于内存容量有限，当磁盘上的增量数据达到一定大小后，需要再把磁盘上的增量数据和基线数据进行合并，形成新的基线数据，这个过程称为冻结
B、增量数据存的是更新数据，放在内存中，由于内存容量有限，当磁盘上的增量数据达到一定大小后，需要再把磁盘上的增量数据和基线数据进行合并，形成新的基线数据，这个过程称为合并
C、每个(副本) zone 的合并是独立进行的
D、每个 server 的合并是独立进行的
E、在合并前需要对增量数据部分进行冻结，确保这部分不被写入，称之为冻结
答案： BCE

多选题（选 2 个） 当租户进行缩容时应该将下面那些参数调整为 ture
A、 enable_sql_audit
B、 syslog_level
C、 enable_auto_leader_switch
D、 enable_rebalance
E、 enable_replication
答案： CD

多选题：转储中的数据行可能包含的类型？
A、更新行
B、插入行
C、删除行
D、查询行
答案： ABC

多选：在运维过程中，发现集群的合并时间过长，通过哪些手段提升合并速度？
A、关闭轮转合并
B、轮转合并下调大 zone_merge_concurrency
C、调大 merge_thread_count
D、调小 zone_merge_timeout
答案： ABC

多选：下面有关 ob 集群合并超时，排查方法描述正确的是？
A、 检查是否开轮转合并，如果已经开启，可以关闭轮转合并，然后再次尝试。
B、 检查 cpu 的负载在合并过程中是否正常
C、 检查合并线程数量的设置是否合理，如果设置的值过小，则根据情况适当调大
D、 检查磁盘状态是否正常
答案： ABCD

多选题（ 2 个） :通过哪些表可以查看合并状态？
A、 __all_rootservice_event_history
B、 __all_mergeinfo
C、 __all_eventinfo
D、 __all_zone
答案： AD

多选题（2 个）：某个普通租户的 memstore 达到一定阈值后，选项正确的是？
A、该普通租户和系统租户进行转储动作，其它普通 租户没有任何影响，继续也不会继续合并
B、如果上次合并失败，冻结后继续执行合并
C、普通租户 memstore 使用量达到阈值，仅仅触发该租户级别转储，完全不需要触发合并动作 
D、根据 minor_freeze_times 参数以及内部表__all_virtual_tenant_memstore_info 表中的freeze_cnt 相比较,进行比较来决定
答案： CD

能够加速转储的参数？
A、 minor_merge_concurrency
B、 major_compact_trigger
C、 minor_freeze_times
D、 freeze_trigger_percentage
答案： AD

多选：有关 MemStore 正确的是？
A、 MemStore 内存使用达到一定比例会自动触发转储或者合并
B、 通过 freeze_trigger_percentage 参数控制其大小
C、 MemStore 可以动态伸缩
D、 MemStore 内存默认是租户内存的 50%
答案： AD

触发合并相关，正确的是？多选 3 个
A、某个租户的 memstore 写到一定比例会自动发起冻结
B、在实际生产中会关闭触发合并
C、通过 select from gv$memstore 来查看个租户的 memstore 信息
D、修改触发合并参数： alter system set memstore_limit_percentage=70
E、Memstore 是指租户申请的内存资源中有多少可以放更新数据
答案： ACE

多选（ 2 个）以下哪些内存结构占了大部分的租户内存？
A、KVCache
B、SQL Work Area
C、MemStore
D、PageCache
答案：AC

多选题：如果在执行运维操作中刚刚跨越合并时间点，需要禁止每日自动合并，在运维结束后可以执行合并，如何操作？
A.修改参数 merger_check_interval 将值设定足够大，确保可以完成运维操作
B.仅需要修改 enable_manual_merge 参数，设置为 True 即可。在运维结束后，手动按 zone进行合并。
C.修改参数 major_freeze_duty_time 的值，避开运维时间，可以在运维后再发生
D.无法停止每日合并，如果不合并将导致内存的增量数据无法落盘带来数据丢失风险。
答案： BC

多选 2 个： 4030 内存报错，通过哪些表可以查看各个模块的内存使用情况？
A、 gv$memory
B、 __all_virtual_memtable
C、 gv$memstore
D、 __all_virtual_memory_info
答案： AD

多选：关于 OB 的手动出发转储，正确的是？
A、 通过命令 alter system major freeze 触发转储
B、 只支持整个集群级别手动触发
C、 可以指定 tenant/partition/server 级别的转储
D、 手动触发的 minor freeze 不受配置项 minor_freeze_times 的限制，即手动触发的 minor freeze 即使超过配置项限制的次数也不会触发 major freeze
答案： CD

多选题：以下属于 DML 语句的是：
A、INSERT、
B、UPDATE
C、DELETE
D、Merge
答案： ABCD

多选题（ 5 个）：为减少执行计划生成次数， OceanBase 使用了执行计划缓存，为了能将 SQL请求在执行计划缓存中命中相同的计划， OceanBase 优化器将 SQL 进行参数化（将 SQL 中的常量转换为参数），然后使用参数化的 SQL 文本作为键值在执行计划缓存中获取执行计划，达到参数不同的 SQL 能够共用相同的计划目的，如下场景中的常量，哪些是不能参数化的？
A、limit 后常量，比如'limit 10'
B、所有 GROUP BY 后常量（例如'GROUP BY 1,2;'）
C、所有 order by 后常量，比如'order by 1,2'
D、所有字段查询的范围常量，比如'between 100 and 200'
E、作为格式串的字符串常量，比如'date_format（now(),'%y-%m-%d'） '
F、查询数据类型精度相关的常量，比如'round(amount,4)'
答案： ABCEF

多选题：执行计划没命中的原因可能是？
A、sql 的条件没有参数化，随机选择的
B、租户内存不足
C、并行事务太多
D、plan cache 中计划太少
答案： ABCD

（多选 2 个）下列关于 plan_cache 的描述正确的是？
A、可以手工进行内存的管理
B、 plan_cache 内存是自动管理的
C、 存放着查询结果信息
答案： AB

多选题： OceanBase 的分区表，对于分区键定义的要求，下列说法正确的是________？（正确个数： 2 个）
A、分区键必须是主键的子集
B、分区键可以不是主键的子集
C、如果分区表有本地唯一索引，分区键必须是所有本地唯一索引列交集的子集
D、如果分区表有全局唯一索引，分区键必须是所有全局唯一索引列交集的子集
答案： AC

多选： explain 计划展示的信息包含下列哪几个选项？
A、 id
B、 name
C、 operation
D、 est.row
E、 cost
F、 paralle
答案： ABCDE

多选 3 个： ob 支持的表连接算法有？
A、 create join
B、 HASH JOIN
C、 MERGE JOIN
D、 NESTED LOOP JOIN
答案： BCD

多选题 (选 2 个) 对于如下的 schema: create table t1 (a int ,b int ,c int,d int,e int,primarykey(a,b),index i1(c,b),index i2(d,a), index i3(d,e));对于查询 select * from t1 where a=1 order by c;经过 skyline pruning 之后，还剩哪些?
A、 主表
B、索引 i1
C、 索引 i2
D、 索引 i3
答案： AB

多选题（3 个）： OB 支持索引类型有？
A、bitmap 索引
B、逆序索引
C、hash 索引
D、唯一索引
E、局部索引
F、全局索引
答案： DEF

多选题：索引的优点有哪些？（待补充）
A、提高查询的速度
B、降低数据库系统的性能开销
答案： AB

多选题：分区表的描述：（待补充）
A、只有 range 分区，可以删除任意一个一级 range 分区 （考点）
B、只能以 append 方式往后添加分区，也就是说，新加分区的 range value 总是最大的（考点）
C、Range 分区按时间字段分区，支持 add,drop 分区
D、还有其它关于 hash， key 分区的描述
答案：ABC

对于查询 select * from R1,R2,R3 where R1.a=R2.a and R2.b=R3.b，下列哪些 hint 能控制这个查询的连接顺序和连接算法？多选 2 个
A、/*+LEADING(R1,R2)*/
B、/*+no_rewrite()*/
C、/*+use_nl(R3)*/
D、/*+index(R1 i1)*/
答案： AC

多选： OceanBase 两阶段提交协议OceanBase 两阶段提交协议对比标准两阶段提交有何改进？
A、协调者不写日志，变成了一个无持久化状态的状态机
B、参与者增加 clear 阶段，标记事务状态机是否终止
C、xxx
D、xxx
答案： AB

多选题： obproxy 建议的部署方式
A、单点部署
B、客户端部署
C、集中部署
D、随时使用随时启用
答案：BC

多选题：通过 obproxy 访问 OceanBase 集群时，下列哪些用户名格式是合法的？
A、 test@testTenant#testCluster:1
B、 test@testTenant#testCluster
C、 test@testTenant
D、 testCluster:testTenant:test
答案： ABD

多选题： obproxy 支持哪些操作？
A、 show proxyconfig
B、show proxyinfo
C、show proxyroute
D、show proxymemory
答案： ACD

多选题： obproxy 支持哪些操作？
A、show proxyconfig
B、show proxyinfo idc
C、show proxyroute
D、show proxymemory
答案：ABCD

多选：如下说法正确的是？
A、 obproxy 的默认端口是 2881
B、 obproxy 的默认端口是 2883
C、 observer 的默认端口是 2883
D、 observer 的默认端口是 2881
答案： BD

多选（2 个）：下列哪些业务场景适合将租户级别变量 ob_read_consistency 设置成 weak 的场景：
A、 历史行情平台
B、 转账
C、 支付
D、 用户信息查询系统
答案： AD

关于客户端、 OBProxy 和 Ob 集群（observer）的连接方式，下面那些说法是正确的？
A、OBProxy 与 OB 集群（OBServer）保持长连接
B、客户端一般通过连接池的方式连接到 OBProxy
C、OBProxy 与 OB 集群（OBServer）是短连接连接
D、在 observer 宕机/升级/重启时，客户端与 OBProxy 的连接不会断开， OBProxy 可以迅速切换到正常的 server 上；
答案：ABD

多选：如果把 obproxy 的 Ldc 配置成 bj_1,正确的命令方法是：
A、 通过 2883 端口， alter system set proxy_idc_name=‘bj_1’
B、 通过 2883 端口,alter proxyconfig set proxy_idc_name='bj_1'
C、 配置项的设置可以通过启动参数/登陆修改/ocp配置项更新进行, 在proxy的启动脚本中使用-i 机房名启动传入
D、 通过 2881 端口， alter proxyconfig set proxy_idc_name=‘bj_1
答案： BC

多选题（ 3 个） OBproxy 有哪些 location cache？
A、 表/分区表的 location cache
B、 普通租户数据的 location cache
C、 database location cache
D、 sys 租户数据的 location cache
答案： ABD

多选题 3 个：如下哪些 sql 可以使用 obproxy 的弱读路由能力
A、 select * from t1 where id=1;
B、 select /*+read_consistency(weak)*/ * from t1 where id =1;
C、 set @@ob_read_consistency='weak' 然后发送 select * from t1 where id = 1;
D、 set @@global.ob_read_consistency='weak' 然后发送 select * from t1 where id = 1;
答案： BCD

下列说法正确的是：
A、 obproxy 不支持给原生 oracle 数据库路由
B、 obproxy 只能通过 ocp url 启动
C、 obproxy 不支持跨集群路由
D、 obproxy 不支持 Ldc 路由
答案： AC

obproxy 决定路由结果所依赖信息：多选
A、当前请求状态，强一致性 or 弱一致性
B、当前请求的库表名字信息
C、目标 server 的 idc、 region 的信息
D、目标 server 的合并状态
答案： ACD

关于 idc 的设置哪几个是正确的（多选 3 个）
A、 启动时通过启动参数设置
B、 通过业务账户连接到 obproxy,alter proxyconfig set proxy_idc_name=‘xxx’
C、 通过系统账户连接到 obproxy,alter proxyconfig set proxy_idc_name=‘xxx’
D、 用户设置 session 变量 set @proxy_idc_name=’XXX’;
答案： ACD

关于 OB2.x 回收站正确的是? 多选 2 个
A、 只有 oracle mode 租户支持回收站功能
B、 通过回收站恢复的表可以直接进行改名操作
C、 回收站的表会定期回收
D、 需要租户管理员才能操作
E、 只有 mysql mode 租户支持回收站功能
答案： BD

多选题：使用 gv$plan_cache_plan_explain 的四个条件是：
A、 ip
B、 port
C、 tenant_id
D、 plan_id
E、 sql_id
答案： ABCD

OLTP 系统，计划缓存命中率低（低于 90%），可能的原因有哪些？
A、sql 写的不好
B、内存大小不足。
答案： AB

多选题：关于执行计划缓存错误的是哪几个？
A、 缓存所有类型的计划
B、 内存大小超过 20 M 执行计划不加入计划缓存。
C、 如果该计划为分布式计划且涉及多个表，则不加入计划缓存
D、 执行计划缓存的内存大小可以通过参数调整
答案： AD

多选题：如果 OB 数据库 tps+qps 突然变低，可以查询以下哪些视图？应该如何排查这个性能问题？
A、 从 gv$sql_audit 中找找有无变慢 sql
B、 从 gv$plan_cache_plan_stat 找到有没有变慢 sql
C、 直接刷新 gv$plan_cache_plan_stat
D、 从日志里面查找 slow query
答案： AD

多选题：关于 variable 变量的描述正确的是：
A、 分为 global 和 session 两个级别
B、 设置 Session 级别的变量仅对当前 Session 有效，对其他 Session 无效
C、 设置 Global 级别的变量对当前 Session 无效，需要重新登录建立新的 Session 才会生效。
D、 Session 级别的变量在 Session 中覆盖 Global 级别的变量。
答案： ABCD

多选题(选 3 个)：执行时间长，性能消耗比较大的 sql 称为慢 sql。关于慢 sql 对 OB 的负面影响正确的是？
A、 触发集群合并
B、 导致 ob 集群无法继续提供读写服务
C、 导致集群中其他 sql 堆积等待
D、 导致部分 follower 分区和 Leader 分区之间的数据同步变慢，数据延迟增大
E、 ob server 进程退出
F、 ob 集群并发能力有所下降
答案： CDF

Ocp 调用以下哪些日志
A、sql_audit
B、trace_log_slow_query_watermark
C、obroxy 慢日志 slow_transaction_time_threshold
D、v$plan_cache_plan_stat
答案： AD

下面哪些属于事务日志类别的。多选 2 个
A、 slog 
B、 clog
C、 ilog
D、 syslog
答案： BC

多选题 3 个：在生产运维过程中，某天发现磁盘使用量过大，禁止分区迁入，那么可以通过哪些方法来应急处理？
A、 drop 部分无用的表，并且清空回收站
B、 设置 max_kept_major_version_number=1
C、 从数据表中 delete 可以删除的数据
D、 调大 data_disk_usage_limit_percentage
答案： ABD

多选题 2 个： observer 日志运行过程中，通过哪些配置项可以管理控制 Oceanbase 自动回收日志？
A、enable_syslog_recycle
B、max_syslog_file_count
答案： AB

多选 2 个：有关 parameters 表述正确的是？
A、 系统参数分为集群级和租户级参数两种,其中租户级参数的修改只对当前租户生效
B、 修改系统参数时，可以指定修改的内容在集群范围生效、只在某个 zone 生效、或者只在某台具体 OBserver 生效。
C、 所有系统参数均是修改后都是实时生效，不需要重启 observer 服务
D、 所有系统参数，都需要登录 sys 租户查询/修改
答案： AB

__all_server 中发现有的机器的状态是 inactive,可能是什么原因？（多选两个）
A、 clog 满了
B、 内存满了
C、inactive 的机器断网了
D、 observer 进程退出了
答案： CD

多选题： 如下哪些可能是绑定 outline 不生效的原因？
A、 执行 sql 时的数据库和绑定 outline 时的数据库不一致
B、 使用 mysql 命令行共计或者 obclient 命令行工具连接 ob 时，没有指定-c 选项
C、 为特定的 sql 文本绑定了 outline,但实际执行的 sql 和最初绑定 outline 使用的 sql 文本（去除 hint 之外的部分）相比， 多了 1 个空格
D、 outline 中使用的 hint 语法有错误， 执行 sql 时虽然命中了 outline， 但 outline 中的 hint未生效
答案： ABCD

关于 OceanBase，以下说法正确的是？
A、OB 可以以普通 PC 硬件为基础，利用 Paxos 分布式一致性协议保证数据可靠性。
B、OB 数据节点和计算节点均可以在 MPP 架构下实现水平扩展。
C、OB 集群在主节点故障的情况下，Paxos 可以保证数据无损（即 RPO=0 )，并且自动选举并恢复服务，服务恢复时间（ RTO）在30秒以内。
D、OB 使用共享存储保证各个节点数据的一致性
答案：ABC

OceanBase 的分区表有哪些特点？
A、只存在单个 OBServer 上
B、自动负载均衡
C、对业务透明
D、需要结合中间件使用
E、支持区间并行
答案：BCE

对于 OceanBase 的分区表，在选择分区的不同类型上，建议是？
A、Range 分区适合处理相似的，与时间有关的数据，或者需要定期导入新数据删除历史数据的场景
B、List 分区适合分区值明确的情形
C、Range 分区可以在线转化成list分区，所以如果有增删子分区需求的可以使用 range 分区，否则使用 list 分区
D、Hash 分区使用随机分布的数据，hash 算法会将分区列的数据进行重新分布使得相近的值被打散到不同分区
E、Hash 分区支持向量，如果是符合主键的场景，可以选择多个列作为分区键，这样无论是分区拆分，还是子分区定位，都更加准确
答案：ABD

创建表时，可以使用一些哪些标记 ？
A、字母
B、数字
C、#
D、_
答案：ABD

由于 OceanBase 2.x实现了全局一致性服，下面哪些服务依赖于这个功能？
A、跨机外键级连更新
B、truncate 分区表 
C、多表跨机 DML
D、分区表全局索引
E、只读副本多表跨机关联查询
答案：ACD

关于闪回查询（ Flashback Query )描述正确的有？
<<<<<<< HEAD
A、OceanBase 2.X的版本可以支持
B、MySQL 和 Oracle 两种租户模式下的闪回查询
C、默认可以 flashback 到上一次合并时间点的数据
D、flashback 支持 timestamp 和 SCN 两种历史时间模式
E、可以设置 undo_rentention ，系统从而会保存 undo_rentention 范围内的数据。如果需要做 flashback ,可以选择这段时间内的某一时间点
答案：CDE
=======
A、OceanBase 2.X的版本可以支持MySQL 和 Oracle 两种租户模式下的闪回查询
B、默认可以 flashback 到上一次合并时间点的数据
C、flashback 支持 timestamp 和 SCN 两种历史时间模式
D、可以设置 undo_rentention ，系统从而会保存 undo_rentention 范围内的数据。如果需要做 flashback ,可以选择这段时间内的某一时间点
答案：BCD
>>>>>>> ea3919324aa704465ef80337eb30fbb0afb674e7

下面哪些事件会记录到系统表＿all_server_event_history 里面？
A、用户发起的系统命令，比如' alter system set < name >=< value > , alter tenant < tenant name > primary _ zone ='< zone list >'.
B、用户执行了一个慢 SQL ，导致 SQL 超时并且被中断了。
C、各个租户的转储记录。
D、集群合并（ major freeze ）记录。
E、集群情况发生变化引发的负载均衡任务，比如集群扩容后引发的分区迁移
F、修改租户的 primary zone 设置所引发的切主操作
G、observer 的上线／下线操作记录。
答案：AC

索引能够加速查询的原因是什么？
消除 SQL 排序
快速定位，加速扫描
冗余数据，方便容灾
索引列少，加速扫描
答案：ABD

OceanBase 全局一致性方案，说法正确的是？
A、 依赖于原子钟
B、 无需依赖特殊硬件
C、 依赖root service
D、 是一个高可用的集中式服务
E、 能够提供全局一致的版本号
答案：BDE

有关OceanBase mysql错误码的表述正确的是？
A、 如果一个错误码的值大于4000，表明它是OB特有的错误码
B、 如果在4000以内，表示它是MySQL兼容错误
C、 如果一个错误码的值大于等于5000，表明它是OB特有的错误码
D、 如果在5000以内，表示它是MySQL兼容错误
答案：AB
